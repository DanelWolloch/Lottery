<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>My First HTML 5 app</title>
    <meta name="viewport" content="width=device-width; initial-scale=1.0; maximum-scale=1.0;">
    <script src="jquery-1.8.1.min.js"></script>
    <script>
        function GetNumberString(number) {
            if (!isNaN(number)) {
                if (number < 10 && number > 0) {
                    return "0" + number;
                } else {
                    return number;
                }
            } else {
                // TODO: Handle error not number was entered.
            }
        }

        function GetUrl(numberString, lotNum) {
            // TODO: Add input checks
            var theUrl = "http://www.pais.co.il/Lotto/Pages/RequestsHandler.ashx?Command=Win_Clarification&Game=Lotto&SubGame=Lotto&SearchBy=Range&From=" + lotNum + "&To=" + lotNum + "&UserInput=" + numberString + "&FormType=&stmp=1337358182530";
            return theUrl;
        }

        function getTablesString() {
            // TODO: make an itaration for each input number and  not hardcoded the ids of each..
            var tablesNumber = GetNumberString($('#Number1').val()) + "%2C";
            tablesNumber += GetNumberString($('#Number2').val()) + "%2C";
            tablesNumber += GetNumberString($('#Number3').val()) + "%2C";
            tablesNumber += GetNumberString($('#Number4').val()) + "%2C";
            tablesNumber += GetNumberString($('#Number5').val()) + "%2C";
            tablesNumber += GetNumberString($('#Number6').val()) + "%2C";
            tablesNumber += GetNumberString($('#Number7').val());
            return tablesNumber + "%7C";
        }

        function Check() {
            var select = "select * from html where url="
            var theUrl = GetUrl(getTablesString(), 2388);

            var yqlQuery = "http://query.yahooapis.com/v1/public/yql?q=" + encodeURIComponent(select + '"' + theUrl + '"') + "&callback=?";

            $.getJSON(yqlQuery, function (data) {
                var winnigPrice = data.results[0].split("<td class=\"PaisSeventh\">")[1].split('<p>')[1].split('</p>')[0];
                $('#winningPrice').text("זכית ב- " + winnigPrice + " שקלים!");
            });
        }
    </script>
    <link rel="stylesheet" href="bootstrap.min.css" />
    <style>
        .Numbers
        {
            width: 25px;
            margin-left: 3px;
        }
    </style>
</head>
<body dir="rtl">
    <hgroup>
        <h1>כמה זכיתי?</h1>
    </hgroup>
    <div>
        <input type="number" class="Numbers" id="Number1" min="1" max="37" />
        <input type="number" class="Numbers" id="Number2" min="1" max="37" />
        <input type="number" class="Numbers" id="Number3" min="1" max="37" />
        <input type="number" class="Numbers" id="Number4" min="1" max="37" />
        <input type="number" class="Numbers" id="Number5" min="1" max="37" />
        <input type="number" class="Numbers" id="Number6" min="1" max="37" />
        <input type="number" class="Numbers" id="Number7" min="1" max="37" />
    </div>

    <button class="btn btn-primary" id="check" onclick="Check()">כמה זכיתי?</button>
    <label id="winningPrice">test</label>
</body>
</html>
